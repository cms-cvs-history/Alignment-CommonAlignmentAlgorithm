process TrackRefit = {

  # initialize magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # tracker geometry
  include "Geometry/TrackerRecoData/data/trackerRecoGeometryXML.cfi"

  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

# misalignment

  # Misalignment example scenario producer
  # include "Alignment/TrackerAlignment/data/ExampleScenario.cfi"
  #include "Alignment/TrackerAlignment/data/ORCAShortTermScenario.cfi"
  #es_prefer MisalignedTracker = MisalignedTrackerESProducer {}

# refitter

  # stripCPE
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
  # pixelCPE
  include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"
  # TransientTrackingBuilder
  include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilderWithoutRefit.cfi"

  # track refit with material
  include "RecoTracker/TrackProducer/test/RefitterWithMaterial.cfi"
  replace TrackRefitter.TTRHBuilder="WithoutRefit"
  replace TrackRefitter.src=TkAlDST
  
  source = PoolSource { 
    untracked int32 maxEvents = -1
    untracked vstring fileNames = {"file:tenmuons.pt5-50.minireco.root"}
  }	    


  module Out = PoolOutputModule
  { 
    untracked string fileName = "file:tenmuons.pt5-50.trackrefit.root"
  }


  path p = { 
    TrackRefitter 
  }

  endpath ep = {
    Out
  }

}
